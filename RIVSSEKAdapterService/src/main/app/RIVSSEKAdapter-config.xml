<?xml version="1.0" encoding="utf-8"?>
<mule
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.mulesoft.org/schema/mule/core" 
	xmlns:spring="http://www.springframework.org/schema/beans" 
	xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"
	xsi:schemaLocation="http://www.springframework.org/schema/beans  http://www.springframework.org/schema/beans/spring-beans-current.xsd   
						http://www.mulesoft.org/schema/mule/core     http://www.mulesoft.org/schema/mule/core/current/mule.xsd
                        http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd">

	<cxf:configuration enableMuleSoapHeaders="false"/>

    <spring:beans>
    
     	<!-- register all services -->
     	
        <spring:import resource="classpath:services/*-service.xml"/>


        <!-- configure router -->
        
        <spring:bean id="router" class="se.skl.skltpservices.ssekadapter.router.Router">
            <spring:property name="takCacheFilename" value="${FILE_LOCAL_TAK_CACHE}" />
            <spring:property name="takWSDL" value="${ENDPOINT_TAK_WSDL}"  />
        </spring:bean>

        <spring:bean id="route-processor" class="se.skl.skltpservices.ssekadapter.mule.OutboundRouter">
            <spring:property name="responseTimeout" value="${SERVICE_TIMEOUT_MS}" />
        </spring:bean>

        <spring:bean id="pre-processor" class="se.skl.skltpservices.ssekadapter.mule.OutboundPreProcessor">
            <spring:property name="router" ref="router" />
        </spring:bean>
        
    </spring:beans>


    <!-- transformers -->

    <custom-transformer class="se.skl.skltpservices.ssekadapter.mule.UseOrCreateCorrelationIdTransformer" 			name="create-correlation-id"/>
   
     <custom-transformer class="se.skl.skltpservices.ssekadapter.mule.TakHamtaAllaVirtualiseringarRequestTransformer" name="tak-vagval-hamtaallavirtualiseringar-transformer" />    

</mule>

